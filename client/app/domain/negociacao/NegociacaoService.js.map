{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","get","then","dados","map","dado","Date","data","quantidade","valor","err","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","Promise","all","periodo","reduce","acc","array","concat","negociacoes","sort","a","b","getTime","catch","_mensagem","texto"],"mappings":";;;;;;AAASA,iB,sBAAAA,W;;AACAC,gB,iBAAAA,U;;;AACF,YAAMC,iBAAN,CAAwB;AAC7BC,sBAAc;AACZ,eAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACD;;AAEDK,mCAA2B;AACzB,iBAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EAAqCC,IAArC,CACJC,KAAD,IACEA,MAAMC,GAAN,CACGC,IAAD,IACE,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,KAAKE,IAAd,CAAf,EAAoCF,KAAKG,UAAzC,EAAqDH,KAAKI,KAA1D,CAFJ,CAFG,EAMJC,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACD,WARI,CAAP;AAUD;;AAEDC,2CAAmC;AACjC,iBAAO,KAAKb,KAAL,CAAWE,GAAX,CAAe,sBAAf,EAAuCC,IAAvC,CACJC,KAAD,IACEA,MAAMC,GAAN,CACGC,IAAD,IACE,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,KAAKE,IAAd,CAAf,EAAoCF,KAAKG,UAAzC,EAAqDH,KAAKI,KAA1D,CAFJ,CAFG,EAMJC,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CACJ,0DADI,CAAN;AAGD,WAVI,CAAP;AAYD;;AAEDE,4CAAoC;AAClC,iBAAO,KAAKd,KAAL,CAAWE,GAAX,CAAe,uBAAf,EAAwCC,IAAxC,CACJC,KAAD,IACEA,MAAMC,GAAN,CACGC,IAAD,IACE,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,KAAKE,IAAd,CAAf,EAAoCF,KAAKG,UAAzC,EAAqDH,KAAKI,KAA1D,CAFJ,CAFG,EAMJC,GAAD,IAAS;AACP,kBAAM,IAAIC,KAAJ,CACJ,2DADI,CAAN;AAGD,WAVI,CAAP;AAYD;;AAEDG,oCAA4B;AAC1B,iBAAOC,QAAQC,GAAR,CAAY,CACjB,KAAKhB,wBAAL,EADiB,EAEjB,KAAKY,gCAAL,EAFiB,EAGjB,KAAKC,iCAAL,EAHiB,CAAZ,EAKJX,IALI,CAKEe,OAAD,IAAaA,QAAQC,MAAR,CAAe,CAACC,GAAD,EAAMC,KAAN,KAAgBD,IAAIE,MAAJ,CAAWD,KAAX,CAA/B,EAAkD,EAAlD,CALd,EAMJlB,IANI,CAMEoB,WAAD,IACJA,YAAYC,IAAZ,CAAiB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,EAAElB,IAAF,CAAOmB,OAAP,KAAmBF,EAAEjB,IAAF,CAAOmB,OAAP,EAA9C,CAPG,EASJC,KATI,CAUFjB,GAAD,IACG,KAAKkB,SAAL,CAAeC,KAAf,GACC,kDAZD,CAAP;AAcD;AA/D4B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js'\nimport { Negociacao } from './Negociacao.js'\nexport class NegociacaoService {\n  constructor() {\n    this._http = new HttpService()\n  }\n\n  obterNegociacoesDaSemana() {\n    return this._http.get('negociacoes/semana').then(\n      (dados) =>\n        dados.map(\n          (dado) =>\n            new Negociacao(new Date(dado.data), dado.quantidade, dado.valor),\n        ),\n      (err) => {\n        throw new Error('Não foi possível obter as negociações da semana')\n      },\n    )\n  }\n\n  obterNegociacoesDaSemanaAnterior() {\n    return this._http.get('negociacoes/anterior').then(\n      (dados) =>\n        dados.map(\n          (dado) =>\n            new Negociacao(new Date(dado.data), dado.quantidade, dado.valor),\n        ),\n      (err) => {\n        throw new Error(\n          'Não foi possível obter as negociações da semana anterior',\n        )\n      },\n    )\n  }\n\n  obterNegociacoesDaSemanaRetrasada() {\n    return this._http.get('negociacoes/retrasada').then(\n      (dados) =>\n        dados.map(\n          (dado) =>\n            new Negociacao(new Date(dado.data), dado.quantidade, dado.valor),\n        ),\n      (err) => {\n        throw new Error(\n          'Não foi possível obter as negociações da semana retrasada',\n        )\n      },\n    )\n  }\n\n  obtemNegociacoesDoPeriodo() {\n    return Promise.all([\n      this.obterNegociacoesDaSemana(),\n      this.obterNegociacoesDaSemanaAnterior(),\n      this.obterNegociacoesDaSemanaRetrasada(),\n    ])\n      .then((periodo) => periodo.reduce((acc, array) => acc.concat(array), []))\n      .then((negociacoes) =>\n        negociacoes.sort((a, b) => b.data.getTime() - a.data.getTime()),\n      )\n      .catch(\n        (err) =>\n          (this._mensagem.texto =\n            'Não foi possível obter as negociações do período'),\n      )\n  }\n}\n"]}